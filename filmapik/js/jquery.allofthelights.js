!function(t){t.fn.allofthelights=function(i){i=t.extend({color:"black",opacity:"0.9",z_index:"10",switch_selector:"switch",delay_turn_on:400,delay_turn_off:400,scrolling:!0,is_responsive:!0,custom_player:null},i);var e=t("body"),o=[],l="#"+i.switch_selector+", ."+i.switch_selector;if(this.each(function(){var i=t(this);o.push(i)}),i.is_responsive){var a=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.dailymotion.com']","iframe[src*='www.kickstarter.com']","object","embed"];i.custom_player&&a.push(i.custom_player);var r=t(this).parent().find(a.join(",")),h='<style type="text/css">\t\t\t\t\t\t\t.fluid_width_video_wrapper {\t\t\t\t\t\t\twidth: 100%;\t\t\t\t\t\t\t\tposition: relative;\t\t\t\t\t\t\tpadding: 0;\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t.fluid_width_video_wrapper iframe,\t\t\t\t\t.fluid_width_video_wrapper object,\t\t\t\t\t.fluid_width_video_wrapper embed {\t\t\t\t\t\tposition: absolute;\t\t\t\t\t\t\ttop: 0;\t\t\t\t\t\t\t\t\tleft: 0;\t\t\t\t\t\t\t\twidth: 100%;\t\t\t\t\t\t\t\theight: 100%;\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t</style>';e.append(h),r.each(function(){var i=t(this);if(!("embed"==this.tagName.toLowerCase()&&i.parent("object").length||i.parent(".fluid_width_video_wrapper").length)){var e=("object"==this.tagName.toLowerCase()||i.attr("height")?i.attr("height"):i.height())/(i.attr("width")?i.attr("width"):i.width());if(!i.attr("id")){var o="fitvid"+Math.floor(999999*Math.random());i.attr("id",o)}i.wrap('<div class="fluid_width_video_wrapper"></div>').parent(".fluid_width_video_wrapper").css("padding-top",100*e+"%"),i.removeAttr("height").removeAttr("width")}})}h='<style type="text/css">\t\t\t\t\t\t.allofthelights_bg {\t\t\t\t\t\t\tposition: absolute;\t\t\t\t\t\tdisplay: none;\t\t\t\t\t\t\tbackground: '+i.color+";\t\t\t\t\topacity: "+i.opacity+";\t\t\t\t\tz-index: "+i.z_index+";\t\t\t\t}\t\t\t\t\t\t\t</style>";function s(){var l=[],a=[],r=1,h=!0;l.push(0),l.push(t(document).width()),a.push(0),a.push(t(document).height());for(var s=0;s<o.length;++s){var n=(b=o[s]).offset(),c=b.height(),d=b.width();l.push(n.left),l.push(n.left+d),a.push(n.top),a.push(n.top+c)}l.sort(function(t,i){return t-i}),a.sort(function(t,i){return t-i});for(s=0;s<l.length-1;++s)for(var f=0;f<a.length-1;++f){for(var p=l[s],_=a[f],u=l[s+1],g=a[f+1],w=!0,v=0;v<o.length;++v){n=(b=o[v]).offset(),c=b.height(),d=b.width();var b,m=n.left,y=n.top,k=n.left+d,j=n.top+c;if(p>=m&&_>=y&&u<=k&&g<=j){w=!1;break}}if(w){if(!t("#allofthelights_bg"+r).length>0){var x="<div id='allofthelights_bg"+r+"' class='allofthelights_bg'></div>";e.append(x)}t("#allofthelights_bg"+r).css({top:_,left:p,right:"0",height:g-_,width:u-p}),r++}}t("div.allofthelights_bg").is(":visible")||t(".allofthelights_bg").fadeIn(+i.delay_turn_off,function(){h&&t.isFunction(i.callback_turn_off)&&(i.callback_turn_off.call(this),h=!1)})}e.append(h),e.on("click",".allofthelights_bg",function(){var o=!0;t(".allofthelights_bg").fadeOut(+i.delay_turn_on,function(){i.scrolling||e.css("overflow","auto"),o&&t.isFunction(i.callback_turn_on)&&(i.callback_turn_on.call(this),o=!1)})}).on("click",l,function(){i.scrolling||e.css("overflow","hidden"),s()}),t(window).on("resize",function(){t("div.allofthelights_bg").is(":visible")&&(t("div.allofthelights_bg").remove(),s())})}}(jQuery);
